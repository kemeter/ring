configs:
    test2:
        namespace: ring
        name: "test-config2"
        data: '{"test.conf":"server { listen 80; server_name localhost; location / { root /usr/share/nginx/html; index index.html index.htm; } }"}'
#        labels: []

deployments:
    php:
        runtime: docker
        namespace: ring
        name: php
        image: "php:7.3-fpm"
        ports: []
        replicas: 3
        labels: []
        config:
            image_pull_policy: "IfNotPresent"
        secrets:
            DATABASE_URL: postgres://postgres:postgres@postgres:5432
            SECRET_ENV: "$SECRET_ENV"
    nginx:
        name: nginx
        namespace: ring
        runtime: docker
        image: "nginx:1.19.5"
        replicas: 1
        volumes:
            - type: bind
              source: /tmp/ring
              destination: /project/ring
              driver: local
              permission: rw
            - type: bind
              source: /tmp/ring
              destination: /project2/ring
              driver: local
              permission: rw
            - type: config
              source: test-config2
              key: "test.conf"
              destination: /var/config/test.conf
              driver: local
              permission: rw

        labels:
            - sozune.host: "nginx.localhost"

    ubuntu:
        name: ubuntu
        replicas: 1
        image: ubuntu:25.10
        namespace: ring
        command: ["sleep", "infinity"]

#services:
#    app:
#        ports: []
#        selector: php
#        networks: []
